{"ast":null,"code":"import React, { cloneElement, Component, Children } from 'react';\nimport { findDOMNode, createPortal } from 'react-dom';\nimport glam from 'glam';\nimport rafScheduler from 'raf-schd';\nimport { ViewPager, Frame, Track, View as View$1 } from 'react-view-pager';\nimport ParseHtml from 'html-react-parser';\nimport { FocusOn } from 'react-focus-on';\nimport Fullscreen from 'react-full-screen';\nimport focusStore from 'a11y-focus-store';\nimport { Transition, TransitionGroup } from 'react-transition-group';\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\nvar defineProperty = function (obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n};\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n  return target;\n};\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\nvar objectWithoutProperties = function (obj, keys) {\n  var target = {};\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n  return target;\n};\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\nvar Base = function Base(_ref) {\n  var css = _ref.css,\n    innerRef = _ref.innerRef,\n    Tag = _ref.tag,\n    props = objectWithoutProperties(_ref, ['css', 'innerRef', 'tag']);\n  return glam(Tag, _extends({\n    ref: innerRef,\n    css: _extends({\n      boxSizing: 'border-box'\n    }, css)\n  }, props));\n};\nvar Button = function Button(props) {\n  return glam(Base, _extends({\n    tag: 'button'\n  }, props));\n};\nvar Div = function Div(props) {\n  return glam(Base, _extends({\n    tag: 'div'\n  }, props));\n};\nvar Img = function Img(props) {\n  return glam(Base, _extends({\n    tag: 'img'\n  }, props));\n};\nvar Nav = function Nav(props) {\n  return glam(Base, _extends({\n    tag: 'nav'\n  }, props));\n};\nvar Span = function Span(props) {\n  return glam(Base, _extends({\n    tag: 'span'\n  }, props));\n};\n\n// ==============================\n// Class Name Prefixer\n// ==============================\n\nvar CLASS_PREFIX = 'react-images';\n\n/**\r\n String representation of component state for styling with class names.\r\n\r\n Expects an array of strings OR a string/object pair:\r\n - className(['comp', 'comp-arg', 'comp-arg-2'])\r\n   @returns 'react-images__comp react-images__comp-arg react-images__comp-arg-2'\r\n - className('comp', { some: true, state: false })\r\n   @returns 'react-images__comp react-images__comp--some'\r\n*/\nfunction className(name, state) {\n  var arr = Array.isArray(name) ? name : [name];\n\n  // loop through state object, remove falsey values and combine with name\n  if (state && typeof name === 'string') {\n    for (var _key in state) {\n      if (state.hasOwnProperty(_key) && state[_key]) {\n        arr.push(name + '--' + _key);\n      }\n    }\n  }\n\n  // prefix everything and return a string\n  return arr.map(function (cn) {\n    return CLASS_PREFIX + '__' + cn;\n  }).join(' ');\n}\n\n// ==============================\n// Touch Capability Detector\n// ==============================\n\nfunction isTouch() {\n  try {\n    document.createEvent('TouchEvent');\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar containerCSS = function containerCSS(_ref) {\n  var isFullscreen = _ref.isFullscreen;\n  return {\n    backgroundColor: isFullscreen ? 'black' : null,\n    display: 'flex ',\n    flexDirection: 'column',\n    height: '100%'\n  };\n};\nvar Container = function Container(props) {\n  var children = props.children,\n    getStyles = props.getStyles,\n    isFullscreen = props.isFullscreen,\n    isModal = props.isModal,\n    innerProps = props.innerProps;\n  return glam(Div, _extends({\n    css: getStyles('container', props),\n    className: className('container', {\n      isFullscreen: isFullscreen,\n      isModal: isModal\n    })\n  }, innerProps), children);\n};\nvar smallDevice = '@media (max-width: 769px)';\n\n/**\r\n * Used to get the HTML class to select specific components.\r\n * We call `className()` in utils with each of these to get the full className,\r\n * with prefixes.\r\n */\nvar componentBaseClassNames = {\n  Header: 'header',\n  Footer: 'footer',\n  View: 'view',\n  Track: 'track',\n  Positioner: 'positioner'\n};\nvar footerCSS = function footerCSS(_ref) {\n  var isModal = _ref.isModal,\n    interactionIsIdle = _ref.interactionIsIdle;\n  return defineProperty({\n    alignItems: 'top',\n    bottom: isModal ? 0 : null,\n    color: isModal ? 'rgba(255, 255, 255, 0.9)' : '#666',\n    display: 'flex ',\n    flex: '0 0 auto',\n    fontSize: 13,\n    justifyContent: 'space-between',\n    left: isModal ? 0 : null,\n    opacity: interactionIsIdle && isModal ? 0 : 1,\n    padding: isModal ? '30px 20px 20px' : '10px 0',\n    position: isModal ? 'absolute' : null,\n    right: isModal ? 0 : null,\n    transform: isModal ? 'translateY(' + (interactionIsIdle ? 10 : 0) + 'px)' : null,\n    transition: 'opacity 300ms, transform 300ms',\n    zIndex: isModal ? 1 : null,\n    '& *:focus': {\n      outline: '1.5px solid orange'\n    }\n  }, smallDevice, {\n    padding: isModal ? '20px 15px 15px' : '5px 0'\n  });\n};\nvar footerBaseClassName = componentBaseClassNames.Footer;\nvar Footer = function Footer(props) {\n  var components = props.components,\n    getStyles = props.getStyles,\n    innerProps = props.innerProps,\n    isFullscreen = props.isFullscreen,\n    isModal = props.isModal;\n  var style = isModal ? {\n    background: 'linear-gradient(rgba(0,0,0,0), rgba(0,0,0,0.33))'\n  } : null;\n  var state = {\n    isFullscreen: isFullscreen,\n    isModal: isModal\n  };\n  var cn = {\n    container: className(footerBaseClassName, state),\n    caption: className('footer__caption', state),\n    count: className('footer__count', state)\n  };\n  var css = {\n    container: getStyles(footerBaseClassName, props),\n    caption: getStyles('footerCaption', props),\n    count: getStyles('footerCount', props)\n  };\n  var Caption = components.Caption,\n    Count = components.Count;\n  return glam(Div, _extends({\n    css: css.container,\n    className: cn.container\n    // TODO glam prefixer fails on gradients\n    // https://github.com/threepointone/glam/issues/35\n    ,\n    style: style\n  }, innerProps), glam(Caption, props), glam(Count, props));\n};\n\n// ==============================\n// Inner Elements\n// ==============================\n\nvar footerCaptionCSS = function footerCaptionCSS() {\n  return {};\n};\nvar FooterCaption = function FooterCaption(props) {\n  var currentView = props.currentView,\n    getStyles = props.getStyles,\n    isFullscreen = props.isFullscreen,\n    isModal = props.isModal;\n  var caption = currentView.caption;\n  var state = {\n    isFullscreen: isFullscreen,\n    isModal: isModal\n  };\n  return glam(Span, {\n    css: getStyles('footerCaption', props),\n    className: className('footer__caption', state)\n  }, typeof caption === 'string' ? ParseHtml('<span>' + caption + '</span>') : caption);\n};\nvar footerCountCSS = function footerCountCSS() {\n  return {\n    flexShrink: 0,\n    marginLeft: '1em'\n  };\n};\nvar FooterCount = function FooterCount(props) {\n  var currentIndex = props.currentIndex,\n    getStyles = props.getStyles,\n    isFullscreen = props.isFullscreen,\n    isModal = props.isModal,\n    views = props.views;\n  var state = {\n    isFullscreen: isFullscreen,\n    isModal: isModal\n  };\n  var activeView = currentIndex + 1;\n  var totalViews = views.length;\n  if (!activeView || !totalViews) return null;\n  return glam(Span, {\n    css: getStyles('footerCount', props),\n    className: className('footer__count', state)\n  }, activeView, ' of ', totalViews);\n};\nvar Svg = function Svg(_ref) {\n  var size = _ref.size,\n    props = objectWithoutProperties(_ref, ['size']);\n  return glam('svg', _extends({\n    role: 'presentation',\n    viewBox: '0 0 24 24',\n    css: {\n      display: 'inline-block',\n      fill: 'currentColor',\n      height: size,\n      stroke: 'currentColor',\n      strokeWidth: 0,\n      width: size\n    }\n  }, props));\n};\nvar ChevronLeft = function ChevronLeft(_ref2) {\n  var _ref2$size = _ref2.size,\n    size = _ref2$size === undefined ? 32 : _ref2$size,\n    props = objectWithoutProperties(_ref2, ['size']);\n  return glam(Svg, _extends({\n    size: size\n  }, props), glam('path', {\n    d: 'M15.422 16.078l-1.406 1.406-6-6 6-6 1.406 1.406-4.594 4.594z'\n  }));\n};\nvar ChevronRight = function ChevronRight(_ref3) {\n  var _ref3$size = _ref3.size,\n    size = _ref3$size === undefined ? 32 : _ref3$size,\n    props = objectWithoutProperties(_ref3, ['size']);\n  return glam(Svg, _extends({\n    size: size\n  }, props), glam('path', {\n    d: 'M9.984 6l6 6-6 6-1.406-1.406 4.594-4.594-4.594-4.594z'\n  }));\n};\nvar Close = function Close(_ref4) {\n  var _ref4$size = _ref4.size,\n    size = _ref4$size === undefined ? 32 : _ref4$size,\n    props = objectWithoutProperties(_ref4, ['size']);\n  return glam(Svg, _extends({\n    size: size\n  }, props), glam('path', {\n    d: 'M18.984 6.422l-5.578 5.578 5.578 5.578-1.406 1.406-5.578-5.578-5.578 5.578-1.406-1.406 5.578-5.578-5.578-5.578 1.406-1.406 5.578 5.578 5.578-5.578z'\n  }));\n};\nvar FullscreenEnter = function FullscreenEnter(_ref5) {\n  var _ref5$size = _ref5.size,\n    size = _ref5$size === undefined ? 32 : _ref5$size,\n    props = objectWithoutProperties(_ref5, ['size']);\n  return glam(Svg, _extends({\n    size: size\n  }, props), glam('path', {\n    d: 'M14.016 5.016h4.969v4.969h-1.969v-3h-3v-1.969zM17.016 17.016v-3h1.969v4.969h-4.969v-1.969h3zM5.016 9.984v-4.969h4.969v1.969h-3v3h-1.969zM6.984 14.016v3h3v1.969h-4.969v-4.969h1.969z'\n  }));\n};\nvar FullscreenExit = function FullscreenExit(_ref6) {\n  var _ref6$size = _ref6.size,\n    size = _ref6$size === undefined ? 32 : _ref6$size,\n    props = objectWithoutProperties(_ref6, ['size']);\n  return glam(Svg, _extends({\n    size: size\n  }, props), glam('path', {\n    d: 'M15.984 8.016h3v1.969h-4.969v-4.969h1.969v3zM14.016 18.984v-4.969h4.969v1.969h-3v3h-1.969zM8.016 8.016v-3h1.969v4.969h-4.969v-1.969h3zM5.016 15.984v-1.969h4.969v4.969h-1.969v-3h-3z'\n  }));\n};\nvar headerCSS = function headerCSS(_ref) {\n  var interactionIsIdle = _ref.interactionIsIdle;\n  return {\n    alignItems: 'center',\n    display: 'flex ',\n    flex: '0 0 auto',\n    justifyContent: 'space-between',\n    opacity: interactionIsIdle ? 0 : 1,\n    padding: 10,\n    paddingBottom: 20,\n    position: 'absolute',\n    transform: 'translateY(' + (interactionIsIdle ? -10 : 0) + 'px)',\n    transition: 'opacity 300ms, transform 300ms',\n    top: 0,\n    left: 0,\n    right: 0,\n    zIndex: 1,\n    '& *:focus': {\n      outline: '1.5px solid orange'\n    }\n  };\n};\nvar headerBaseClassName = componentBaseClassNames.Header;\nvar Header = function Header(props) {\n  var components = props.components,\n    getStyles = props.getStyles,\n    getCloseLabel = props.getCloseLabel,\n    getFullscreenLabel = props.getFullscreenLabel,\n    innerProps = props.innerProps,\n    isModal = props.isModal,\n    modalProps = props.modalProps;\n  if (!isModal) return null;\n  var allowFullscreen = modalProps.allowFullscreen,\n    isFullscreen = modalProps.isFullscreen,\n    onClose = modalProps.onClose,\n    toggleFullscreen = modalProps.toggleFullscreen;\n  var FsIcon = isFullscreen ? FullscreenExit : FullscreenEnter;\n  var CloseButton = components.CloseButton,\n    FullscreenButton = components.FullscreenButton;\n  var state = {\n    isFullscreen: isFullscreen,\n    isModal: isModal\n  };\n  return glam(Div, _extends({\n    css: getStyles(headerBaseClassName, props),\n    className: className(headerBaseClassName, state)\n    // TODO glam prefixer fails on gradients\n    // https://github.com/threepointone/glam/issues/35\n    ,\n    style: {\n      background: 'linear-gradient(rgba(0,0,0,0.33), rgba(0,0,0,0))'\n    }\n  }, innerProps), glam('span', null), glam('span', null, allowFullscreen ? glam(FullscreenButton, {\n    getStyles: getStyles,\n    innerProps: {\n      onClick: toggleFullscreen,\n      title: getFullscreenLabel(state)\n    }\n  }, glam(FsIcon, {\n    size: 32\n  })) : null, glam(CloseButton, {\n    getStyles: getStyles,\n    innerProps: {\n      onClick: onClose,\n      title: getCloseLabel(state)\n    }\n  }, glam(Close, {\n    size: 32\n  }))));\n};\n\n// ==============================\n// Header Buttons\n// ==============================\n\nvar headerButtonCSS = function headerButtonCSS() {\n  return {\n    alignItems: 'center',\n    background: 0,\n    border: 0,\n    color: 'rgba(255, 255, 255, 0.75)',\n    cursor: 'pointer',\n    display: 'inline-flex ',\n    height: 44,\n    justifyContent: 'center',\n    outline: 0,\n    padding: 0,\n    position: 'relative',\n    width: 44,\n    '&:hover': {\n      color: 'white'\n    }\n  };\n};\nvar headerFullscreenCSS = headerButtonCSS;\nvar HeaderFullscreen = function HeaderFullscreen(props) {\n  var children = props.children,\n    getStyles = props.getStyles,\n    innerProps = props.innerProps;\n  return glam(Button, _extends({\n    css: getStyles('headerFullscreen', props),\n    className: className(['header_button', 'header_button--fullscreen']),\n    type: 'button'\n  }, innerProps), children);\n};\nvar headerCloseCSS = headerButtonCSS;\nvar HeaderClose = function HeaderClose(props) {\n  var children = props.children,\n    getStyles = props.getStyles,\n    innerProps = props.innerProps;\n  return glam(Button, _extends({\n    css: getStyles('headerClose', props),\n    className: className(['header_button', 'header_button--close']),\n    type: 'button'\n  }, innerProps), children);\n};\n\n// ==============================\n// Navigation\n// ==============================\n\nvar navigationCSS = function navigationCSS(_ref) {\n  var interactionIsIdle = _ref.interactionIsIdle;\n  return {\n    display: 'flex ',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    opacity: interactionIsIdle ? 0 : 1,\n    transition: 'opacity 300ms',\n    '& *:focus': {\n      outline: '1.5px solid orange'\n    }\n  };\n};\nvar Navigation = function Navigation(props) {\n  var children = props.children,\n    getStyles = props.getStyles,\n    isFullscreen = props.isFullscreen,\n    isModal = props.isModal,\n    showNavigationOnTouchDevice = props.showNavigationOnTouchDevice;\n  return !isTouch() || isTouch() && showNavigationOnTouchDevice ? glam(Nav, {\n    css: getStyles('navigation', props),\n    className: className('navigation', {\n      isFullscreen: isFullscreen,\n      isModal: isModal\n    })\n  }, children) : null;\n};\n\n// ==============================\n// Nav Item\n// ==============================\n\nvar BUTTON_SIZE = 50;\nvar navigationItemCSS = function navigationItemCSS(_ref2) {\n  var _ref3;\n  var align = _ref2.align;\n  return _ref3 = {\n    alignItems: 'center',\n    background: 'rgba(255, 255, 255, 0.2)',\n    border: 0,\n    borderRadius: '50%',\n    color: 'white',\n    cursor: 'pointer',\n    display: 'flex ',\n    fontSize: 'inherit',\n    height: BUTTON_SIZE,\n    justifyContent: 'center',\n    marginTop: -(BUTTON_SIZE / 2),\n    outline: 0,\n    position: 'absolute',\n    top: '50%',\n    transition: 'background-color 200ms',\n    width: BUTTON_SIZE\n  }, defineProperty(_ref3, align, 20), defineProperty(_ref3, '&:hover', {\n    background: 'rgba(255, 255, 255, 0.3)'\n  }), defineProperty(_ref3, '&:active', {\n    background: 'rgba(255, 255, 255, 0.2)'\n  }), _ref3;\n};\nvar navigationPrevCSS = navigationItemCSS;\nvar NavigationPrev = function NavigationPrev(props) {\n  var _props$children = props.children,\n    children = _props$children === undefined ? glam(ChevronLeft, {\n      size: 48\n    }) : _props$children,\n    getStyles = props.getStyles,\n    innerProps = props.innerProps;\n  return glam(Button, _extends({\n    type: 'button',\n    css: getStyles('navigationPrev', props)\n  }, innerProps), children);\n};\nvar navigationNextCSS = navigationItemCSS;\nvar NavigationNext = function NavigationNext(props) {\n  var _props$children2 = props.children,\n    children = _props$children2 === undefined ? glam(ChevronRight, {\n      size: 48\n    }) : _props$children2,\n    getStyles = props.getStyles,\n    innerProps = props.innerProps;\n  return glam(Button, _extends({\n    type: 'button',\n    css: getStyles('navigationNext', props)\n  }, innerProps), children);\n};\n\n// ==============================\n// Blanket\n// ==============================\n\nvar blanketCSS = function blanketCSS(_ref) {\n  var isFullscreen = _ref.isFullscreen;\n  return {\n    backgroundColor: isFullscreen ? 'black' : 'rgba(0, 0, 0, 0.8)',\n    bottom: 0,\n    left: 0,\n    position: 'fixed',\n    right: 0,\n    top: 0,\n    zIndex: 1199\n  };\n};\nvar Blanket = function Blanket(props) {\n  var getStyles = props.getStyles,\n    innerProps = props.innerProps,\n    isFullscreen = props.isFullscreen;\n  return glam(Div, _extends({\n    css: getStyles('blanket', props),\n    className: className('blanket', {\n      isFullscreen: isFullscreen\n    })\n  }, innerProps));\n};\n\n// ==============================\n// Positioner\n// ==============================\n\nvar positionerCSS = function positionerCSS() {\n  return {\n    alignItems: 'center',\n    bottom: 0,\n    display: 'flex ',\n    justifyContent: 'center',\n    left: 0,\n    position: 'fixed',\n    right: 0,\n    top: 0,\n    zIndex: 1200\n  };\n};\nvar Positioner = function Positioner(props) {\n  var children = props.children,\n    getStyles = props.getStyles,\n    innerProps = props.innerProps,\n    isFullscreen = props.isFullscreen;\n  return glam(Div, _extends({\n    css: getStyles(componentBaseClassNames.Positioner, props),\n    className: className(componentBaseClassNames.Positioner, {\n      isFullscreen: isFullscreen\n    })\n  }, innerProps), children);\n};\n\n// ==============================\n// Dialog\n// ==============================\n\nvar dialogCSS = function dialogCSS() {\n  return {\n    width: '100%'\n  };\n};\nvar Dialog = function Dialog(props) {\n  var children = props.children,\n    getStyles = props.getStyles,\n    innerProps = props.innerProps,\n    isFullscreen = props.isFullscreen,\n    removeFocusOn = props.removeFocusOn;\n  return removeFocusOn ? glam(Div, _extends({\n    css: getStyles('dialog', props),\n    className: className('dialog', {\n      isFullscreen: isFullscreen\n    })\n  }, innerProps), children) : glam(FocusOn, null, glam(Div, _extends({\n    css: getStyles('dialog', props),\n    className: className('dialog', {\n      isFullscreen: isFullscreen\n    })\n  }, innerProps), children));\n};\nfunction getSource(_ref) {\n  var data = _ref.data,\n    isFullscreen = _ref.isFullscreen;\n  var _data$source = data.source,\n    source = _data$source === undefined ? data.src : _data$source;\n  if (typeof source === 'string') return source;\n  return isFullscreen ? source.fullscreen : source.regular;\n}\nvar viewCSS = function viewCSS() {\n  return {\n    lineHeight: 0,\n    position: 'relative',\n    textAlign: 'center'\n  };\n};\nvar viewBaseClassName = componentBaseClassNames.View;\nvar View = function View(props) {\n  var data = props.data,\n    formatters = props.formatters,\n    getStyles = props.getStyles,\n    index = props.index,\n    isFullscreen = props.isFullscreen,\n    isModal = props.isModal;\n  var innerProps = {\n    alt: formatters.getAltText({\n      data: data,\n      index: index\n    }),\n    src: getSource({\n      data: data,\n      isFullscreen: isFullscreen\n    })\n  };\n  return glam(Div, {\n    css: getStyles(viewBaseClassName, props),\n    className: className(viewBaseClassName, {\n      isFullscreen: isFullscreen,\n      isModal: isModal\n    })\n  }, glam(Img, _extends({}, innerProps, {\n    className: className('view-image', {\n      isFullscreen: isFullscreen,\n      isModal: isModal\n    }),\n    css: {\n      height: 'auto',\n      maxHeight: '100%',\n      maxWidth: '100%',\n      userSelect: 'none',\n      margin: 'auto'\n    }\n  })));\n};\nvar carouselComponents = {\n  Container: Container,\n  Footer: Footer,\n  FooterCaption: FooterCaption,\n  FooterCount: FooterCount,\n  Header: Header,\n  HeaderClose: HeaderClose,\n  HeaderFullscreen: HeaderFullscreen,\n  Navigation: Navigation,\n  NavigationPrev: NavigationPrev,\n  NavigationNext: NavigationNext,\n  View: View\n};\nvar defaultCarouselComponents = function defaultCarouselComponents(providedComponents) {\n  return _extends({}, carouselComponents, providedComponents);\n};\n\n// ==============================\n// Modal\n// ==============================\n\nvar modalComponents = {\n  Blanket: Blanket,\n  Positioner: Positioner,\n  Dialog: Dialog\n};\nvar defaultModalComponents = function defaultModalComponents(providedComponents) {\n  return _extends({}, modalComponents, providedComponents);\n};\nvar defaultCarouselStyles = {\n  container: containerCSS,\n  footer: footerCSS,\n  footerCaption: footerCaptionCSS,\n  footerCount: footerCountCSS,\n  header: headerCSS,\n  headerClose: headerCloseCSS,\n  headerFullscreen: headerFullscreenCSS,\n  navigation: navigationCSS,\n  navigationPrev: navigationPrevCSS,\n  navigationNext: navigationNextCSS,\n  view: viewCSS\n};\nvar defaultModalStyles = {\n  blanket: blanketCSS,\n  dialog: dialogCSS,\n  positioner: positionerCSS\n};\nvar easing = 'cubic-bezier(0.23, 1, 0.32, 1)'; // easeOutQuint\nvar verticalOffset = 40;\n\n// ==============================\n// Fade\n// ==============================\n\nvar Fade = function Fade(_ref) {\n  var Tag = _ref.component,\n    onEntered = _ref.onEntered,\n    onExited = _ref.onExited,\n    inProp = _ref.in,\n    originalProps = _ref.innerProps,\n    props = objectWithoutProperties(_ref, ['component', 'onEntered', 'onExited', 'in', 'innerProps']);\n  var enter = 300;\n  var exit = 500;\n  var fadeStyle = {\n    transition: 'opacity 200ms',\n    opacity: 0\n  };\n  var fadeTransition = {\n    entering: {\n      opacity: 0\n    },\n    entered: {\n      opacity: 1\n    },\n    exiting: {\n      opacity: 0,\n      transitionDuration: exit + 'ms'\n    }\n  };\n  return React.createElement(Transition, {\n    appear: true,\n    mountOnEnter: true,\n    unmountOnExit: true,\n    onEntered: onEntered,\n    onExited: onExited,\n    key: 'fade',\n    'in': inProp,\n    timeout: {\n      enter: enter,\n      exit: exit\n    }\n  }, function (status) {\n    var innerProps = _extends({}, originalProps, {\n      style: _extends({}, fadeStyle, fadeTransition[status])\n    });\n    if (status === 'exited') return null;\n    return React.createElement(Tag, _extends({\n      innerProps: innerProps\n    }, props));\n  });\n};\nvar SlideUp = function SlideUp(_ref2) {\n  var Tag = _ref2.component,\n    onEntered = _ref2.onEntered,\n    onExited = _ref2.onExited,\n    inProp = _ref2.in,\n    originalProps = _ref2.innerProps,\n    props = objectWithoutProperties(_ref2, ['component', 'onEntered', 'onExited', 'in', 'innerProps']);\n  var enter = 300;\n  var exit = 500;\n  var restingTransform = 'translate3d(0, 0, 0)';\n  var slideStyle = {\n    transition: 'transform ' + enter + 'ms ' + easing + ', opacity ' + enter + 'ms ' + easing,\n    transform: restingTransform\n  };\n  var slideTransition = {\n    entering: {\n      opacity: 0,\n      transform: 'translate3d(0, ' + verticalOffset + 'px, 0) scale(0.9)'\n    },\n    entered: {\n      opacity: 1,\n      transform: restingTransform\n    },\n    exiting: {\n      opacity: 0,\n      transform: 'translate3d(0, ' + verticalOffset + 'px, 0) scale(0.9)',\n      transition: 'transform ' + exit + 'ms ' + easing + ', opacity ' + exit + 'ms ' + easing\n    }\n  };\n  return React.createElement(Transition, {\n    appear: true,\n    'in': inProp,\n    mountOnEnter: true,\n    onEntered: onEntered,\n    onExited: onExited,\n    timeout: {\n      enter: enter,\n      exit: exit\n    },\n    unmountOnExit: true\n  }, function (status) {\n    if (status === 'exited') return null;\n    var innerProps = _extends({}, originalProps, {\n      style: _extends({}, slideStyle, slideTransition[status])\n    });\n    return React.createElement(Tag, _extends({\n      innerProps: innerProps\n    }, props));\n  });\n};\nvar defaultProps = {\n  allowFullscreen: !isTouch(),\n  closeOnBackdropClick: true,\n  closeOnEsc: true,\n  preventScroll: true,\n  styles: {}\n};\n\n/** Classes that when clicked on, close the backdrop */\nvar backdropClassNames = new Set([componentBaseClassNames.View, componentBaseClassNames.Header, componentBaseClassNames.Footer, componentBaseClassNames.Track, componentBaseClassNames.Positioner].map(className));\nvar Modal = function (_Component) {\n  inherits(Modal, _Component);\n\n  // TODO\n  function Modal(props) {\n    classCallCheck(this, Modal);\n    var _this = possibleConstructorReturn(this, (Modal.__proto__ || Object.getPrototypeOf(Modal)).call(this, props));\n    _initialiseProps.call(_this);\n    _this.cacheComponents(props.components);\n    _this.state = {\n      isFullscreen: false,\n      isClosing: false\n    };\n    return _this;\n  }\n  createClass(Modal, [{\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.components !== this.props.components) {\n        this.cacheComponents(prevProps.components);\n      }\n    }\n\n    // emulate `componentDidMount` & `componentWillUnmount`\n    // called on complete of enter & exit transitions respectively\n  }, {\n    key: 'getCommonProps',\n    value: function getCommonProps() {\n      var isFullscreen = this.state.isFullscreen;\n      return {\n        getStyles: this.getStyles,\n        isFullscreen: isFullscreen,\n        modalProps: this.props\n      };\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _components = this.components,\n        Blanket = _components.Blanket,\n        Positioner = _components.Positioner,\n        Dialog = _components.Dialog;\n      var _props = this.props,\n        allowFullscreen = _props.allowFullscreen,\n        children = _props.children;\n      var isFullscreen = this.state.isFullscreen;\n      var commonProps = this.commonProps = this.getCommonProps();\n\n      // $FlowFixMe\n      var transitionIn = this.props.in;\n\n      // forward props to modal for use in internal components\n      var modalProps = {\n        allowFullscreen: allowFullscreen,\n        isFullscreen: isFullscreen,\n        onClose: this.handleClose,\n        preventScroll: this.preventScroll,\n        toggleFullscreen: this.toggleFullscreen\n      };\n\n      // augment user carousel with modal props\n      // $FlowFixMe\n      var carouselComponent = cloneElement(children, {\n        isModal: true,\n        modalProps: modalProps\n      });\n      return glam(Fullscreen, {\n        enabled: isFullscreen,\n        onChange: this.handleFullscreenChange\n      }, glam(Fade, _extends({}, commonProps, {\n        component: Blanket,\n        'in': transitionIn\n      })), glam(SlideUp, _extends({}, commonProps, {\n        component: Positioner,\n        'in': transitionIn,\n        innerProps: {\n          onClick: this.state.isClosing ? null : this.handleBackdropClick\n        },\n        onEntered: this.modalDidMount,\n        onExited: this.modalWillUnmount\n      }), glam(Dialog, _extends({\n        removeFocusOn: this.state.isClosing\n      }, commonProps), carouselComponent)));\n    }\n  }]);\n  return Modal;\n}(Component);\nModal.defaultProps = defaultProps;\nvar _initialiseProps = function _initialiseProps() {\n  var _this2 = this;\n  this.modalDidMount = function () {\n    document.addEventListener('keyup', _this2.handleKeyUp);\n    focusStore.storeFocus();\n  };\n  this.modalWillUnmount = function () {\n    document.removeEventListener('keyup', _this2.handleKeyUp);\n    focusStore.restoreFocus();\n    _this2.setState({\n      isClosing: false\n    });\n  };\n  this.cacheComponents = function (comps) {\n    _this2.components = defaultModalComponents(comps);\n  };\n  this.handleFullscreenChange = function (isFullscreen) {\n    _this2.setState({\n      isFullscreen: isFullscreen\n    });\n  };\n  this.handleKeyUp = function (event) {\n    var _props2 = _this2.props,\n      allowFullscreen = _props2.allowFullscreen,\n      closeOnEsc = _props2.closeOnEsc;\n    var isFullscreen = _this2.state.isFullscreen;\n    var allowClose = event.key === 'Escape' && closeOnEsc && !isFullscreen;\n\n    // toggle fullscreen\n    if (allowFullscreen && event.key === 'f') {\n      _this2.toggleFullscreen();\n    }\n\n    // close on escape when not fullscreen\n    if (allowClose) _this2.handleClose(event);\n  };\n  this.handleBackdropClick = function (event) {\n    var hasBackdropClassName = false;\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n    try {\n      for (var _iterator = event.target.classList[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var targetClass = _step.value;\n        if (backdropClassNames.has(targetClass)) {\n          hasBackdropClassName = true;\n        }\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n    if (!hasBackdropClassName || !_this2.props.closeOnBackdropClick) {\n      return;\n    }\n    _this2.handleClose(event);\n  };\n  this.toggleFullscreen = function () {\n    _this2.setState(function (state) {\n      return {\n        isFullscreen: !state.isFullscreen\n      };\n    });\n  };\n  this.handleClose = function (event) {\n    var onClose = _this2.props.onClose;\n    var isFullscreen = _this2.state.isFullscreen;\n    _this2.setState({\n      isClosing: true\n    });\n\n    // force exit fullscreen mode on close\n    if (isFullscreen) {\n      _this2.toggleFullscreen();\n    }\n\n    // call the consumer's onClose func\n    onClose(event);\n  };\n  this.getStyles = function (key, props) {\n    var base = defaultModalStyles[key](props);\n    base.boxSizing = 'border-box';\n    var custom = _this2.props.styles[key];\n    return custom ? custom(base, props) : base;\n  };\n};\n\n// ==============================\n// Navigation\n// ==============================\n\n/* ARIA label for the next button */\n\n// NOTE: props aren't used by default for some getters but consumers may need\n// them, this needs to be reflected in the flow type.\n\n/* eslint-disable no-unused-vars */\n\nfunction getNextLabel(_ref) {\n  var currentIndex = _ref.currentIndex,\n    views = _ref.views;\n  return 'Show slide ' + (currentIndex + 2) + ' of ' + views.length;\n}\n\n/* ARIA label for the previous button */\nfunction getPrevLabel(_ref2) {\n  var currentIndex = _ref2.currentIndex,\n    views = _ref2.views;\n  return 'Show slide ' + currentIndex + ' of ' + views.length;\n}\n\n/* HTML title for the next button */\nfunction getNextTitle(props) {\n  return 'Next (right arrow)';\n}\n\n/* HTML title for the previous button */\nfunction getPrevTitle(props) {\n  return 'Previous (left arrow)';\n}\n\n// ==============================\n// Header\n// ==============================\n\n/* ARIA label for the close button */\nfunction getCloseLabel(props) {\n  return 'Close (esc)';\n}\n/* ARIA label for the fullscreen button */\nfunction getFullscreenLabel(_ref3) {\n  var isFullscreen = _ref3.isFullscreen;\n  return isFullscreen ? 'Exit fullscreen (f)' : 'Enter fullscreen (f)';\n}\n\n// ==============================\n// View\n// ==============================\n\n/* alt text for each image in the carousel */\nfunction getAltText(_ref4) {\n  var data = _ref4.data,\n    index = _ref4.index;\n  if (data.caption) return data.caption;\n  return 'Image ' + (index + 1);\n}\n\n// ==============================\n// Exports\n// ==============================\n\nvar formatters = {\n  getAltText: getAltText,\n  getNextLabel: getNextLabel,\n  getPrevLabel: getPrevLabel,\n  getNextTitle: getNextTitle,\n  getPrevTitle: getPrevTitle,\n  getCloseLabel: getCloseLabel,\n  getFullscreenLabel: getFullscreenLabel\n};\nvar viewPagerStyles = {\n  flex: '1 1 auto',\n  position: 'relative'\n};\nvar frameStyles = {\n  outline: 0\n};\nvar defaultProps$1 = {\n  currentIndex: 0,\n  formatters: formatters,\n  hideControlsWhenIdle: 3000,\n  showNavigationOnTouchDevice: false,\n  styles: {},\n  trackProps: {\n    instant: !isTouch(),\n    swipe: 'touch'\n  }\n};\nvar trackBaseClassName = componentBaseClassNames.Track;\nvar Carousel = function (_Component) {\n  inherits(Carousel, _Component);\n  function Carousel(props) {\n    classCallCheck(this, Carousel);\n    var _this = possibleConstructorReturn(this, (Carousel.__proto__ || Object.getPrototypeOf(Carousel)).call(this, props));\n    _initialiseProps$1.call(_this);\n    _this.cacheComponents(props.components);\n    _this.state = {\n      currentIndex: props.currentIndex,\n      interactionIsIdle: isTouch()\n    };\n    return _this;\n  } // TODO\n\n  createClass(Carousel, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var _props = this.props,\n        hideControlsWhenIdle = _props.hideControlsWhenIdle,\n        modalProps = _props.modalProps;\n      var isModal = Boolean(modalProps);\n      this.mounted = true;\n      if (hideControlsWhenIdle && this.container) {\n        this.container.addEventListener('mousedown', this.handleMouseActivity);\n        this.container.addEventListener('mousemove', this.handleMouseActivity);\n        this.container.addEventListener('touchmove', this.handleMouseActivity);\n      }\n      if (isModal) {\n        this.focusViewFrame();\n      }\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.components !== this.props.components) {\n        this.cacheComponents(prevProps.components);\n      }\n      if (this.props.currentIndex !== prevProps.currentIndex) {\n        this.setState({\n          currentIndex: this.props.currentIndex\n        });\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.mounted = false;\n      if (this.props.hideControlsWhenIdle && this.container) {\n        this.container.removeEventListener('mousedown', this.handleMouseActivity);\n        this.container.removeEventListener('mousemove', this.handleMouseActivity);\n        this.container.removeEventListener('touchmove', this.handleMouseActivity);\n        this.handleMouseActivity.cancel();\n      }\n    }\n\n    // ==============================\n    // Refs\n    // ==============================\n\n    // ==============================\n    // Utilities\n    // ==============================\n\n    // combine defaultProps with consumer props to maintain expected behaviour\n\n    // combine defaultProps with consumer props to maintain expected behaviour\n\n    // ==============================\n    // Handlers\n    // ==============================\n\n    // ==============================\n    // Renderers\n    // ==============================\n  }, {\n    key: 'getCommonProps',\n    value: function getCommonProps() {\n      var _props2 = this.props,\n        frameProps = _props2.frameProps,\n        trackProps = _props2.trackProps,\n        modalProps = _props2.modalProps,\n        views = _props2.views,\n        showNavigationOnTouchDevice = _props2.showNavigationOnTouchDevice;\n      var isModal = Boolean(modalProps);\n      var isFullscreen = Boolean(modalProps && modalProps.isFullscreen);\n      var _state = this.state,\n        currentIndex = _state.currentIndex,\n        interactionIsIdle = _state.interactionIsIdle;\n      var currentView = this.getViewData();\n      return {\n        carouselProps: this.props,\n        currentIndex: currentIndex,\n        currentView: currentView,\n        formatters: this.props.formatters,\n        frameProps: frameProps,\n        getStyles: this.getStyles,\n        showNavigationOnTouchDevice: showNavigationOnTouchDevice,\n        isFullscreen: isFullscreen,\n        isModal: isModal,\n        modalProps: modalProps,\n        interactionIsIdle: interactionIsIdle,\n        trackProps: trackProps,\n        views: views\n      };\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _components = this.components,\n        Container = _components.Container,\n        View = _components.View;\n      var currentIndex = this.state.currentIndex;\n      var _props3 = this.props,\n        frameProps = _props3.frameProps,\n        views = _props3.views;\n      var commonProps = this.commonProps = this.getCommonProps();\n      return glam(Container, _extends({}, commonProps, {\n        innerProps: {\n          innerRef: this.getContainer\n        }\n      }), this.renderHeader(), glam(ViewPager, {\n        tag: 'main',\n        style: viewPagerStyles,\n        className: className('pager')\n      }, glam(Frame, _extends({}, frameProps, {\n        ref: this.getFrame,\n        className: className('frame'),\n        style: frameStyles,\n        tabIndex: '-1'\n      }), glam(Track, _extends({}, this.getTrackProps(this.props), {\n        style: {\n          display: 'flex',\n          alignItems: 'center'\n        },\n        currentView: currentIndex,\n        className: className(trackBaseClassName),\n        onViewChange: this.handleViewChange,\n        ref: this.getTrack\n      }), views && views.map(function (data, index) {\n        return glam(View$1, {\n          className: className('view-wrapper'),\n          key: index\n        }, glam(View, _extends({}, commonProps, {\n          data: data,\n          index: index\n        })));\n      }))), this.renderNavigation()), this.renderFooter());\n    }\n  }]);\n  return Carousel;\n}(Component);\nCarousel.defaultProps = defaultProps$1;\nvar _initialiseProps$1 = function _initialiseProps() {\n  var _this2 = this;\n  this.mounted = false;\n  this.cacheComponents = function (comps) {\n    _this2.components = defaultCarouselComponents(comps);\n  };\n  this.getContainer = function (ref) {\n    _this2.container = ref;\n  };\n  this.getFooter = function (ref) {\n    _this2.footer = ref;\n  };\n  this.getFrame = function (ref) {\n    _this2.frame = findDOMNode(ref);\n  };\n  this.getHeader = function (ref) {\n    _this2.header = ref;\n  };\n  this.getTrack = function (ref) {\n    _this2.track = ref;\n  };\n  this.hasPreviousView = function () {\n    var trackProps = _this2.props.trackProps;\n    var currentIndex = _this2.state.currentIndex;\n    return trackProps.infinite || currentIndex !== 0;\n  };\n  this.hasNextView = function () {\n    var _props4 = _this2.props,\n      trackProps = _props4.trackProps,\n      views = _props4.views;\n    var currentIndex = _this2.state.currentIndex;\n    return trackProps.infinite || currentIndex !== views.length - 1;\n  };\n  this.getStyles = function (key, props) {\n    var base = defaultCarouselStyles[key](props);\n    base.boxSizing = 'border-box';\n    var custom = _this2.props.styles[key];\n    return custom ? custom(base, props) : base;\n  };\n  this.getTrackProps = function (props) {\n    return _extends({}, defaultProps$1.trackProps, props.trackProps);\n  };\n  this.getFormatters = function () {\n    return _extends({}, defaultProps$1.formatters, _this2.props.formatters);\n  };\n  this.getViewData = function () {\n    var views = _this2.props.views;\n    var currentIndex = _this2.state.currentIndex;\n    return views[currentIndex];\n  };\n  this.focusViewFrame = function () {\n    if (_this2.frame && document.activeElement !== _this2.frame) {\n      _this2.frame.focus();\n    }\n  };\n  this.prev = function (event) {\n    event.stopPropagation();\n    _this2.track.prev();\n    _this2.focusViewFrame();\n  };\n  this.next = function (event) {\n    event.stopPropagation();\n    _this2.track.next();\n    _this2.focusViewFrame();\n  };\n  this.handleMouseActivity = rafScheduler(function () {\n    clearTimeout(_this2.timer);\n    if (_this2.state.interactionIsIdle) {\n      _this2.setState({\n        interactionIsIdle: false\n      });\n    }\n    _this2.timer = setTimeout(function () {\n      if (_this2.mounted) {\n        _this2.setState({\n          interactionIsIdle: true\n        });\n      }\n    }, _this2.props.hideControlsWhenIdle);\n  });\n  this.handleViewChange = function (indicies) {\n    var trackProps = _this2.props.trackProps;\n\n    // simplify by enforcing number\n\n    var currentIndex = indicies[0];\n    _this2.setState({\n      currentIndex: currentIndex\n    });\n\n    // call the consumer's onViewChange fn\n    if (trackProps && trackProps.onViewChange) {\n      trackProps.onViewChange(currentIndex);\n    }\n  };\n  this.renderNavigation = function () {\n    var _getFormatters = _this2.getFormatters(),\n      getNextLabel = _getFormatters.getNextLabel,\n      getPrevLabel = _getFormatters.getPrevLabel,\n      getNextTitle = _getFormatters.getNextTitle,\n      getPrevTitle = _getFormatters.getPrevTitle;\n    var _components2 = _this2.components,\n      Navigation = _components2.Navigation,\n      NavigationPrev = _components2.NavigationPrev,\n      NavigationNext = _components2.NavigationNext;\n    var commonProps = _this2.commonProps;\n    var showPrev = _this2.hasPreviousView();\n    var showNext = _this2.hasNextView();\n    var showNav = (showPrev || showNext) && Navigation;\n    return showNav ? glam(Navigation, commonProps, showPrev && glam(NavigationPrev, _extends({}, commonProps, {\n      align: 'left',\n      innerProps: {\n        'aria-label': getPrevLabel(commonProps),\n        onClick: _this2.prev,\n        title: getPrevTitle(commonProps)\n      }\n    })), showNext && glam(NavigationNext, _extends({}, commonProps, {\n      align: 'right',\n      innerProps: {\n        'aria-label': getNextLabel(commonProps),\n        onClick: _this2.next,\n        title: getNextTitle(commonProps)\n      }\n    }))) : null;\n  };\n  this.renderFooter = function () {\n    var _components3 = _this2.components,\n      Footer = _components3.Footer,\n      FooterCaption = _components3.FooterCaption,\n      FooterCount = _components3.FooterCount;\n    var commonProps = _this2.commonProps;\n    return Footer ? glam(Footer, _extends({}, commonProps, {\n      components: {\n        Caption: FooterCaption,\n        Count: FooterCount\n      },\n      innerProps: {\n        innerRef: _this2.getFooter\n      }\n    })) : null;\n  };\n  this.renderHeader = function () {\n    var _components4 = _this2.components,\n      Header = _components4.Header,\n      HeaderClose = _components4.HeaderClose,\n      HeaderFullscreen = _components4.HeaderFullscreen;\n    var _getFormatters2 = _this2.getFormatters(),\n      getCloseLabel = _getFormatters2.getCloseLabel,\n      getFullscreenLabel = _getFormatters2.getFullscreenLabel;\n    var commonProps = _this2.commonProps;\n    return Header ? glam(Header, _extends({}, commonProps, {\n      getCloseLabel: getCloseLabel,\n      getFullscreenLabel: getFullscreenLabel,\n      components: {\n        CloseButton: HeaderClose,\n        FullscreenButton: HeaderFullscreen\n      },\n      data: _this2.getViewData(),\n      innerProps: {\n        innerRef: _this2.getHeader\n      }\n    })) : null;\n  };\n};\nvar FirstChild = function FirstChild(_ref) {\n  var children = _ref.children;\n  return Children.toArray(children)[0] || null;\n};\nvar ModalGateway = function (_Component) {\n  inherits(ModalGateway, _Component);\n  function ModalGateway() {\n    classCallCheck(this, ModalGateway);\n    return possibleConstructorReturn(this, (ModalGateway.__proto__ || Object.getPrototypeOf(ModalGateway)).apply(this, arguments));\n  }\n  createClass(ModalGateway, [{\n    key: 'render',\n    value: function render() {\n      if (typeof window === 'undefined') return null;\n      var _props = this.props,\n        target = _props.target,\n        children = _props.children;\n      return createPortal(React.createElement(TransitionGroup, {\n        component: FirstChild,\n        children: children\n      }), target);\n    }\n  }]);\n  return ModalGateway;\n}(Component);\nModalGateway.defaultProps = {\n  target: typeof window !== 'undefined' ? document.body : null\n};\nexport default Carousel;\nexport { Modal, ModalGateway, carouselComponents, modalComponents };","map":{"version":3,"names":["React","cloneElement","Component","Children","findDOMNode","createPortal","glam","rafScheduler","ViewPager","Frame","Track","View","View$1","ParseHtml","FocusOn","Fullscreen","focusStore","Transition","TransitionGroup","classCallCheck","instance","Constructor","TypeError","createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","obj","value","_extends","assign","arguments","source","hasOwnProperty","call","inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","objectWithoutProperties","keys","indexOf","possibleConstructorReturn","self","ReferenceError","Base","_ref","css","innerRef","Tag","tag","ref","boxSizing","Button","Div","Img","Nav","Span","CLASS_PREFIX","className","name","state","arr","Array","isArray","_key","push","map","cn","join","isTouch","document","createEvent","e","containerCSS","isFullscreen","backgroundColor","display","flexDirection","height","Container","children","getStyles","isModal","innerProps","smallDevice","componentBaseClassNames","Header","Footer","Positioner","footerCSS","interactionIsIdle","alignItems","bottom","color","flex","fontSize","justifyContent","left","opacity","padding","position","right","transform","transition","zIndex","outline","footerBaseClassName","components","style","background","container","caption","count","Caption","Count","footerCaptionCSS","FooterCaption","currentView","footerCountCSS","flexShrink","marginLeft","FooterCount","currentIndex","views","activeView","totalViews","Svg","size","role","viewBox","fill","stroke","strokeWidth","width","ChevronLeft","_ref2","_ref2$size","undefined","d","ChevronRight","_ref3","_ref3$size","Close","_ref4","_ref4$size","FullscreenEnter","_ref5","_ref5$size","FullscreenExit","_ref6","_ref6$size","headerCSS","paddingBottom","top","headerBaseClassName","getCloseLabel","getFullscreenLabel","modalProps","allowFullscreen","onClose","toggleFullscreen","FsIcon","CloseButton","FullscreenButton","onClick","title","headerButtonCSS","border","cursor","headerFullscreenCSS","HeaderFullscreen","type","headerCloseCSS","HeaderClose","navigationCSS","Navigation","showNavigationOnTouchDevice","BUTTON_SIZE","navigationItemCSS","align","borderRadius","marginTop","navigationPrevCSS","NavigationPrev","_props$children","navigationNextCSS","NavigationNext","_props$children2","blanketCSS","Blanket","positionerCSS","dialogCSS","Dialog","removeFocusOn","getSource","data","_data$source","src","fullscreen","regular","viewCSS","lineHeight","textAlign","viewBaseClassName","formatters","index","alt","getAltText","maxHeight","maxWidth","userSelect","margin","carouselComponents","defaultCarouselComponents","providedComponents","modalComponents","defaultModalComponents","defaultCarouselStyles","footer","footerCaption","footerCount","header","headerClose","headerFullscreen","navigation","navigationPrev","navigationNext","view","defaultModalStyles","blanket","dialog","positioner","easing","verticalOffset","Fade","component","onEntered","onExited","inProp","in","originalProps","enter","exit","fadeStyle","fadeTransition","entering","entered","exiting","transitionDuration","createElement","appear","mountOnEnter","unmountOnExit","timeout","status","SlideUp","restingTransform","slideStyle","slideTransition","defaultProps","closeOnBackdropClick","closeOnEsc","preventScroll","styles","backdropClassNames","Set","Modal","_Component","_this","getPrototypeOf","_initialiseProps","cacheComponents","isClosing","componentDidUpdate","prevProps","getCommonProps","render","_components","_props","commonProps","transitionIn","handleClose","carouselComponent","enabled","onChange","handleFullscreenChange","handleBackdropClick","modalDidMount","modalWillUnmount","_this2","addEventListener","handleKeyUp","storeFocus","removeEventListener","restoreFocus","setState","comps","event","_props2","allowClose","hasBackdropClassName","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","classList","Symbol","iterator","_step","next","done","targetClass","has","err","return","base","custom","getNextLabel","getPrevLabel","getNextTitle","getPrevTitle","viewPagerStyles","frameStyles","defaultProps$1","hideControlsWhenIdle","trackProps","instant","swipe","trackBaseClassName","Carousel","_initialiseProps$1","componentDidMount","Boolean","mounted","handleMouseActivity","focusViewFrame","componentWillUnmount","cancel","frameProps","_state","getViewData","carouselProps","_props3","getContainer","renderHeader","getFrame","tabIndex","getTrackProps","onViewChange","handleViewChange","getTrack","renderNavigation","renderFooter","getFooter","frame","getHeader","track","hasPreviousView","infinite","hasNextView","_props4","getFormatters","activeElement","focus","prev","stopPropagation","clearTimeout","timer","setTimeout","indicies","_getFormatters","_components2","showPrev","showNext","showNav","_components3","_components4","_getFormatters2","FirstChild","toArray","ModalGateway","apply","window","body"],"sources":["/Users/oluwatobilobaogunbi/Desktop/UOttawa/tobiogunbiwebsite/react-portfolio/node_modules/react-images/dist/react-images.es.js"],"sourcesContent":["import React, { cloneElement, Component, Children } from 'react';\nimport { findDOMNode, createPortal } from 'react-dom';\nimport glam from 'glam';\nimport rafScheduler from 'raf-schd';\nimport { ViewPager, Frame, Track, View as View$1 } from 'react-view-pager';\nimport ParseHtml from 'html-react-parser';\nimport { FocusOn } from 'react-focus-on';\nimport Fullscreen from 'react-full-screen';\nimport focusStore from 'a11y-focus-store';\nimport { Transition, TransitionGroup } from 'react-transition-group';\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar defineProperty = function (obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n};\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\nvar objectWithoutProperties = function (obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n};\n\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\nvar Base = function Base(_ref) {\n  var css = _ref.css,\n      innerRef = _ref.innerRef,\n      Tag = _ref.tag,\n      props = objectWithoutProperties(_ref, ['css', 'innerRef', 'tag']);\n  return glam(Tag, _extends({\n    ref: innerRef,\n    css: _extends({\n      boxSizing: 'border-box'\n    }, css)\n  }, props));\n};\nvar Button = function Button(props) {\n  return glam(Base, _extends({ tag: 'button' }, props));\n};\nvar Div = function Div(props) {\n  return glam(Base, _extends({ tag: 'div' }, props));\n};\nvar Img = function Img(props) {\n  return glam(Base, _extends({ tag: 'img' }, props));\n};\nvar Nav = function Nav(props) {\n  return glam(Base, _extends({ tag: 'nav' }, props));\n};\nvar Span = function Span(props) {\n  return glam(Base, _extends({ tag: 'span' }, props));\n};\n\n// ==============================\n// Class Name Prefixer\n// ==============================\n\nvar CLASS_PREFIX = 'react-images';\n\n/**\r\n String representation of component state for styling with class names.\r\n\r\n Expects an array of strings OR a string/object pair:\r\n - className(['comp', 'comp-arg', 'comp-arg-2'])\r\n   @returns 'react-images__comp react-images__comp-arg react-images__comp-arg-2'\r\n - className('comp', { some: true, state: false })\r\n   @returns 'react-images__comp react-images__comp--some'\r\n*/\nfunction className(name, state) {\n  var arr = Array.isArray(name) ? name : [name];\n\n  // loop through state object, remove falsey values and combine with name\n  if (state && typeof name === 'string') {\n    for (var _key in state) {\n      if (state.hasOwnProperty(_key) && state[_key]) {\n        arr.push(name + '--' + _key);\n      }\n    }\n  }\n\n  // prefix everything and return a string\n  return arr.map(function (cn) {\n    return CLASS_PREFIX + '__' + cn;\n  }).join(' ');\n}\n\n// ==============================\n// Touch Capability Detector\n// ==============================\n\nfunction isTouch() {\n  try {\n    document.createEvent('TouchEvent');\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nvar containerCSS = function containerCSS(_ref) {\n  var isFullscreen = _ref.isFullscreen;\n  return {\n    backgroundColor: isFullscreen ? 'black' : null,\n    display: 'flex ',\n    flexDirection: 'column',\n    height: '100%'\n  };\n};\n\nvar Container = function Container(props) {\n  var children = props.children,\n      getStyles = props.getStyles,\n      isFullscreen = props.isFullscreen,\n      isModal = props.isModal,\n      innerProps = props.innerProps;\n\n  return glam(\n    Div,\n    _extends({\n      css: getStyles('container', props),\n      className: className('container', { isFullscreen: isFullscreen, isModal: isModal })\n    }, innerProps),\n    children\n  );\n};\n\nvar smallDevice = '@media (max-width: 769px)';\n\n/**\r\n * Used to get the HTML class to select specific components.\r\n * We call `className()` in utils with each of these to get the full className,\r\n * with prefixes.\r\n */\nvar componentBaseClassNames = {\n  Header: 'header',\n  Footer: 'footer',\n  View: 'view',\n  Track: 'track',\n  Positioner: 'positioner'\n};\n\nvar footerCSS = function footerCSS(_ref) {\n  var isModal = _ref.isModal,\n      interactionIsIdle = _ref.interactionIsIdle;\n  return defineProperty({\n    alignItems: 'top',\n    bottom: isModal ? 0 : null,\n    color: isModal ? 'rgba(255, 255, 255, 0.9)' : '#666',\n    display: 'flex ',\n    flex: '0 0 auto',\n    fontSize: 13,\n    justifyContent: 'space-between',\n    left: isModal ? 0 : null,\n    opacity: interactionIsIdle && isModal ? 0 : 1,\n    padding: isModal ? '30px 20px 20px' : '10px 0',\n    position: isModal ? 'absolute' : null,\n    right: isModal ? 0 : null,\n    transform: isModal ? 'translateY(' + (interactionIsIdle ? 10 : 0) + 'px)' : null,\n    transition: 'opacity 300ms, transform 300ms',\n    zIndex: isModal ? 1 : null,\n\n    '& *:focus': {\n      outline: '1.5px solid orange'\n    }\n\n  }, smallDevice, {\n    padding: isModal ? '20px 15px 15px' : '5px 0'\n  });\n};\n\nvar footerBaseClassName = componentBaseClassNames.Footer;\n\nvar Footer = function Footer(props) {\n  var components = props.components,\n      getStyles = props.getStyles,\n      innerProps = props.innerProps,\n      isFullscreen = props.isFullscreen,\n      isModal = props.isModal;\n\n\n  var style = isModal ? { background: 'linear-gradient(rgba(0,0,0,0), rgba(0,0,0,0.33))' } : null;\n\n  var state = { isFullscreen: isFullscreen, isModal: isModal };\n  var cn = {\n    container: className(footerBaseClassName, state),\n    caption: className('footer__caption', state),\n    count: className('footer__count', state)\n  };\n  var css = {\n    container: getStyles(footerBaseClassName, props),\n    caption: getStyles('footerCaption', props),\n    count: getStyles('footerCount', props)\n  };\n  var Caption = components.Caption,\n      Count = components.Count;\n\n\n  return glam(\n    Div,\n    _extends({\n      css: css.container,\n      className: cn.container\n      // TODO glam prefixer fails on gradients\n      // https://github.com/threepointone/glam/issues/35\n      , style: style\n    }, innerProps),\n    glam(Caption, props),\n    glam(Count, props)\n  );\n};\n\n// ==============================\n// Inner Elements\n// ==============================\n\nvar footerCaptionCSS = function footerCaptionCSS() {\n  return {};\n};\n\nvar FooterCaption = function FooterCaption(props) {\n  var currentView = props.currentView,\n      getStyles = props.getStyles,\n      isFullscreen = props.isFullscreen,\n      isModal = props.isModal;\n  var caption = currentView.caption;\n\n  var state = { isFullscreen: isFullscreen, isModal: isModal };\n\n  return glam(\n    Span,\n    {\n      css: getStyles('footerCaption', props),\n      className: className('footer__caption', state)\n    },\n    typeof caption === 'string' ? ParseHtml('<span>' + caption + '</span>') : caption\n  );\n};\n\nvar footerCountCSS = function footerCountCSS() {\n  return { flexShrink: 0, marginLeft: '1em' };\n};\n\nvar FooterCount = function FooterCount(props) {\n  var currentIndex = props.currentIndex,\n      getStyles = props.getStyles,\n      isFullscreen = props.isFullscreen,\n      isModal = props.isModal,\n      views = props.views;\n\n  var state = { isFullscreen: isFullscreen, isModal: isModal };\n  var activeView = currentIndex + 1;\n  var totalViews = views.length;\n\n  if (!activeView || !totalViews) return null;\n\n  return glam(\n    Span,\n    {\n      css: getStyles('footerCount', props),\n      className: className('footer__count', state)\n    },\n    activeView,\n    ' of ',\n    totalViews\n  );\n};\n\nvar Svg = function Svg(_ref) {\n  var size = _ref.size,\n      props = objectWithoutProperties(_ref, ['size']);\n  return glam('svg', _extends({\n    role: 'presentation',\n    viewBox: '0 0 24 24',\n    css: {\n      display: 'inline-block',\n      fill: 'currentColor',\n      height: size,\n      stroke: 'currentColor',\n      strokeWidth: 0,\n      width: size\n    }\n  }, props));\n};\n\nvar ChevronLeft = function ChevronLeft(_ref2) {\n  var _ref2$size = _ref2.size,\n      size = _ref2$size === undefined ? 32 : _ref2$size,\n      props = objectWithoutProperties(_ref2, ['size']);\n  return glam(\n    Svg,\n    _extends({ size: size }, props),\n    glam('path', { d: 'M15.422 16.078l-1.406 1.406-6-6 6-6 1.406 1.406-4.594 4.594z' })\n  );\n};\nvar ChevronRight = function ChevronRight(_ref3) {\n  var _ref3$size = _ref3.size,\n      size = _ref3$size === undefined ? 32 : _ref3$size,\n      props = objectWithoutProperties(_ref3, ['size']);\n  return glam(\n    Svg,\n    _extends({ size: size }, props),\n    glam('path', { d: 'M9.984 6l6 6-6 6-1.406-1.406 4.594-4.594-4.594-4.594z' })\n  );\n};\nvar Close = function Close(_ref4) {\n  var _ref4$size = _ref4.size,\n      size = _ref4$size === undefined ? 32 : _ref4$size,\n      props = objectWithoutProperties(_ref4, ['size']);\n  return glam(\n    Svg,\n    _extends({ size: size }, props),\n    glam('path', { d: 'M18.984 6.422l-5.578 5.578 5.578 5.578-1.406 1.406-5.578-5.578-5.578 5.578-1.406-1.406 5.578-5.578-5.578-5.578 1.406-1.406 5.578 5.578 5.578-5.578z' })\n  );\n};\nvar FullscreenEnter = function FullscreenEnter(_ref5) {\n  var _ref5$size = _ref5.size,\n      size = _ref5$size === undefined ? 32 : _ref5$size,\n      props = objectWithoutProperties(_ref5, ['size']);\n  return glam(\n    Svg,\n    _extends({ size: size }, props),\n    glam('path', { d: 'M14.016 5.016h4.969v4.969h-1.969v-3h-3v-1.969zM17.016 17.016v-3h1.969v4.969h-4.969v-1.969h3zM5.016 9.984v-4.969h4.969v1.969h-3v3h-1.969zM6.984 14.016v3h3v1.969h-4.969v-4.969h1.969z' })\n  );\n};\nvar FullscreenExit = function FullscreenExit(_ref6) {\n  var _ref6$size = _ref6.size,\n      size = _ref6$size === undefined ? 32 : _ref6$size,\n      props = objectWithoutProperties(_ref6, ['size']);\n  return glam(\n    Svg,\n    _extends({ size: size }, props),\n    glam('path', { d: 'M15.984 8.016h3v1.969h-4.969v-4.969h1.969v3zM14.016 18.984v-4.969h4.969v1.969h-3v3h-1.969zM8.016 8.016v-3h1.969v4.969h-4.969v-1.969h3zM5.016 15.984v-1.969h4.969v4.969h-1.969v-3h-3z' })\n  );\n};\n\nvar headerCSS = function headerCSS(_ref) {\n  var interactionIsIdle = _ref.interactionIsIdle;\n  return {\n    alignItems: 'center',\n    display: 'flex ',\n    flex: '0 0 auto',\n    justifyContent: 'space-between',\n    opacity: interactionIsIdle ? 0 : 1,\n    padding: 10,\n    paddingBottom: 20,\n    position: 'absolute',\n    transform: 'translateY(' + (interactionIsIdle ? -10 : 0) + 'px)',\n    transition: 'opacity 300ms, transform 300ms',\n    top: 0,\n    left: 0,\n    right: 0,\n    zIndex: 1,\n    '& *:focus': {\n      outline: '1.5px solid orange'\n    }\n  };\n};\n\nvar headerBaseClassName = componentBaseClassNames.Header;\n\nvar Header = function Header(props) {\n  var components = props.components,\n      getStyles = props.getStyles,\n      getCloseLabel = props.getCloseLabel,\n      getFullscreenLabel = props.getFullscreenLabel,\n      innerProps = props.innerProps,\n      isModal = props.isModal,\n      modalProps = props.modalProps;\n\n\n  if (!isModal) return null;\n\n  var allowFullscreen = modalProps.allowFullscreen,\n      isFullscreen = modalProps.isFullscreen,\n      onClose = modalProps.onClose,\n      toggleFullscreen = modalProps.toggleFullscreen;\n\n  var FsIcon = isFullscreen ? FullscreenExit : FullscreenEnter;\n  var CloseButton = components.CloseButton,\n      FullscreenButton = components.FullscreenButton;\n\n  var state = { isFullscreen: isFullscreen, isModal: isModal };\n\n  return glam(\n    Div,\n    _extends({\n      css: getStyles(headerBaseClassName, props),\n      className: className(headerBaseClassName, state)\n      // TODO glam prefixer fails on gradients\n      // https://github.com/threepointone/glam/issues/35\n      , style: {\n        background: 'linear-gradient(rgba(0,0,0,0.33), rgba(0,0,0,0))'\n      }\n    }, innerProps),\n    glam('span', null),\n    glam(\n      'span',\n      null,\n      allowFullscreen ? glam(\n        FullscreenButton,\n        {\n          getStyles: getStyles,\n          innerProps: {\n            onClick: toggleFullscreen,\n            title: getFullscreenLabel(state)\n          }\n        },\n        glam(FsIcon, { size: 32 })\n      ) : null,\n      glam(\n        CloseButton,\n        {\n          getStyles: getStyles,\n          innerProps: {\n            onClick: onClose,\n            title: getCloseLabel(state)\n          }\n        },\n        glam(Close, { size: 32 })\n      )\n    )\n  );\n};\n\n// ==============================\n// Header Buttons\n// ==============================\n\nvar headerButtonCSS = function headerButtonCSS() {\n  return {\n    alignItems: 'center',\n    background: 0,\n    border: 0,\n    color: 'rgba(255, 255, 255, 0.75)',\n    cursor: 'pointer',\n    display: 'inline-flex ',\n    height: 44,\n    justifyContent: 'center',\n    outline: 0,\n    padding: 0,\n    position: 'relative',\n    width: 44,\n\n    '&:hover': {\n      color: 'white'\n    }\n  };\n};\n\nvar headerFullscreenCSS = headerButtonCSS;\nvar HeaderFullscreen = function HeaderFullscreen(props) {\n  var children = props.children,\n      getStyles = props.getStyles,\n      innerProps = props.innerProps;\n\n\n  return glam(\n    Button,\n    _extends({\n      css: getStyles('headerFullscreen', props),\n      className: className(['header_button', 'header_button--fullscreen']),\n      type: 'button'\n    }, innerProps),\n    children\n  );\n};\n\nvar headerCloseCSS = headerButtonCSS;\nvar HeaderClose = function HeaderClose(props) {\n  var children = props.children,\n      getStyles = props.getStyles,\n      innerProps = props.innerProps;\n\n\n  return glam(\n    Button,\n    _extends({\n      css: getStyles('headerClose', props),\n      className: className(['header_button', 'header_button--close']),\n      type: 'button'\n    }, innerProps),\n    children\n  );\n};\n\n// ==============================\n// Navigation\n// ==============================\n\nvar navigationCSS = function navigationCSS(_ref) {\n  var interactionIsIdle = _ref.interactionIsIdle;\n  return {\n    display: 'flex ',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    opacity: interactionIsIdle ? 0 : 1,\n    transition: 'opacity 300ms',\n    '& *:focus': {\n      outline: '1.5px solid orange'\n    }\n  };\n};\n\nvar Navigation = function Navigation(props) {\n  var children = props.children,\n      getStyles = props.getStyles,\n      isFullscreen = props.isFullscreen,\n      isModal = props.isModal,\n      showNavigationOnTouchDevice = props.showNavigationOnTouchDevice;\n\n  return !isTouch() || isTouch() && showNavigationOnTouchDevice ? glam(\n    Nav,\n    {\n      css: getStyles('navigation', props),\n      className: className('navigation', { isFullscreen: isFullscreen, isModal: isModal })\n    },\n    children\n  ) : null;\n};\n\n// ==============================\n// Nav Item\n// ==============================\n\nvar BUTTON_SIZE = 50;\n\nvar navigationItemCSS = function navigationItemCSS(_ref2) {\n  var _ref3;\n\n  var align = _ref2.align;\n  return _ref3 = {\n    alignItems: 'center',\n    background: 'rgba(255, 255, 255, 0.2)',\n    border: 0,\n    borderRadius: '50%',\n    color: 'white',\n    cursor: 'pointer',\n    display: 'flex ',\n    fontSize: 'inherit',\n    height: BUTTON_SIZE,\n    justifyContent: 'center',\n    marginTop: -(BUTTON_SIZE / 2),\n    outline: 0,\n    position: 'absolute',\n    top: '50%',\n    transition: 'background-color 200ms',\n    width: BUTTON_SIZE\n  }, defineProperty(_ref3, align, 20), defineProperty(_ref3, '&:hover', {\n    background: 'rgba(255, 255, 255, 0.3)'\n  }), defineProperty(_ref3, '&:active', {\n    background: 'rgba(255, 255, 255, 0.2)'\n  }), _ref3;\n};\n\nvar navigationPrevCSS = navigationItemCSS;\nvar NavigationPrev = function NavigationPrev(props) {\n  var _props$children = props.children,\n      children = _props$children === undefined ? glam(ChevronLeft, { size: 48 }) : _props$children,\n      getStyles = props.getStyles,\n      innerProps = props.innerProps;\n\n\n  return glam(\n    Button,\n    _extends({\n      type: 'button',\n      css: getStyles('navigationPrev', props)\n    }, innerProps),\n    children\n  );\n};\n\nvar navigationNextCSS = navigationItemCSS;\nvar NavigationNext = function NavigationNext(props) {\n  var _props$children2 = props.children,\n      children = _props$children2 === undefined ? glam(ChevronRight, { size: 48 }) : _props$children2,\n      getStyles = props.getStyles,\n      innerProps = props.innerProps;\n\n\n  return glam(\n    Button,\n    _extends({\n      type: 'button',\n      css: getStyles('navigationNext', props)\n    }, innerProps),\n    children\n  );\n};\n\n// ==============================\n// Blanket\n// ==============================\n\nvar blanketCSS = function blanketCSS(_ref) {\n  var isFullscreen = _ref.isFullscreen;\n  return {\n    backgroundColor: isFullscreen ? 'black' : 'rgba(0, 0, 0, 0.8)',\n    bottom: 0,\n    left: 0,\n    position: 'fixed',\n    right: 0,\n    top: 0,\n    zIndex: 1199\n  };\n};\n\nvar Blanket = function Blanket(props) {\n  var getStyles = props.getStyles,\n      innerProps = props.innerProps,\n      isFullscreen = props.isFullscreen;\n\n  return glam(Div, _extends({\n    css: getStyles('blanket', props),\n    className: className('blanket', { isFullscreen: isFullscreen })\n  }, innerProps));\n};\n\n// ==============================\n// Positioner\n// ==============================\n\nvar positionerCSS = function positionerCSS() {\n  return {\n    alignItems: 'center',\n    bottom: 0,\n    display: 'flex ',\n    justifyContent: 'center',\n    left: 0,\n    position: 'fixed',\n    right: 0,\n    top: 0,\n    zIndex: 1200\n  };\n};\n\nvar Positioner = function Positioner(props) {\n  var children = props.children,\n      getStyles = props.getStyles,\n      innerProps = props.innerProps,\n      isFullscreen = props.isFullscreen;\n\n  return glam(\n    Div,\n    _extends({\n      css: getStyles(componentBaseClassNames.Positioner, props),\n      className: className(componentBaseClassNames.Positioner, { isFullscreen: isFullscreen })\n    }, innerProps),\n    children\n  );\n};\n\n// ==============================\n// Dialog\n// ==============================\n\nvar dialogCSS = function dialogCSS() {\n  return {\n    width: '100%'\n  };\n};\n\nvar Dialog = function Dialog(props) {\n  var children = props.children,\n      getStyles = props.getStyles,\n      innerProps = props.innerProps,\n      isFullscreen = props.isFullscreen,\n      removeFocusOn = props.removeFocusOn;\n\n\n  return removeFocusOn ? glam(\n    Div,\n    _extends({\n      css: getStyles('dialog', props),\n      className: className('dialog', { isFullscreen: isFullscreen })\n    }, innerProps),\n    children\n  ) : glam(\n    FocusOn,\n    null,\n    glam(\n      Div,\n      _extends({\n        css: getStyles('dialog', props),\n        className: className('dialog', { isFullscreen: isFullscreen })\n      }, innerProps),\n      children\n    )\n  );\n};\n\nfunction getSource(_ref) {\n  var data = _ref.data,\n      isFullscreen = _ref.isFullscreen;\n  var _data$source = data.source,\n      source = _data$source === undefined ? data.src : _data$source;\n\n  if (typeof source === 'string') return source;\n\n  return isFullscreen ? source.fullscreen : source.regular;\n}\n\nvar viewCSS = function viewCSS() {\n  return {\n    lineHeight: 0,\n    position: 'relative',\n    textAlign: 'center'\n  };\n};\n\nvar viewBaseClassName = componentBaseClassNames.View;\n\nvar View = function View(props) {\n  var data = props.data,\n      formatters = props.formatters,\n      getStyles = props.getStyles,\n      index = props.index,\n      isFullscreen = props.isFullscreen,\n      isModal = props.isModal;\n\n  var innerProps = {\n    alt: formatters.getAltText({ data: data, index: index }),\n    src: getSource({ data: data, isFullscreen: isFullscreen })\n  };\n\n  return glam(\n    Div,\n    {\n      css: getStyles(viewBaseClassName, props),\n      className: className(viewBaseClassName, { isFullscreen: isFullscreen, isModal: isModal })\n    },\n    glam(Img, _extends({}, innerProps, {\n      className: className('view-image', { isFullscreen: isFullscreen, isModal: isModal }),\n      css: {\n        height: 'auto',\n        maxHeight: '100%',\n        maxWidth: '100%',\n        userSelect: 'none',\n        margin: 'auto'\n      }\n    }))\n  );\n};\n\nvar carouselComponents = {\n  Container: Container,\n  Footer: Footer,\n  FooterCaption: FooterCaption,\n  FooterCount: FooterCount,\n  Header: Header,\n  HeaderClose: HeaderClose,\n  HeaderFullscreen: HeaderFullscreen,\n  Navigation: Navigation,\n  NavigationPrev: NavigationPrev,\n  NavigationNext: NavigationNext,\n  View: View\n};\n\nvar defaultCarouselComponents = function defaultCarouselComponents(providedComponents) {\n  return _extends({}, carouselComponents, providedComponents);\n};\n\n// ==============================\n// Modal\n// ==============================\n\nvar modalComponents = {\n  Blanket: Blanket,\n  Positioner: Positioner,\n  Dialog: Dialog\n};\n\nvar defaultModalComponents = function defaultModalComponents(providedComponents) {\n  return _extends({}, modalComponents, providedComponents);\n};\n\nvar defaultCarouselStyles = {\n  container: containerCSS,\n  footer: footerCSS,\n  footerCaption: footerCaptionCSS,\n  footerCount: footerCountCSS,\n  header: headerCSS,\n  headerClose: headerCloseCSS,\n  headerFullscreen: headerFullscreenCSS,\n  navigation: navigationCSS,\n  navigationPrev: navigationPrevCSS,\n  navigationNext: navigationNextCSS,\n  view: viewCSS\n};\nvar defaultModalStyles = {\n  blanket: blanketCSS,\n  dialog: dialogCSS,\n  positioner: positionerCSS\n};\n\nvar easing = 'cubic-bezier(0.23, 1, 0.32, 1)'; // easeOutQuint\nvar verticalOffset = 40;\n\n// ==============================\n// Fade\n// ==============================\n\nvar Fade = function Fade(_ref) {\n  var Tag = _ref.component,\n      onEntered = _ref.onEntered,\n      onExited = _ref.onExited,\n      inProp = _ref.in,\n      originalProps = _ref.innerProps,\n      props = objectWithoutProperties(_ref, ['component', 'onEntered', 'onExited', 'in', 'innerProps']);\n\n  var enter = 300;\n  var exit = 500;\n  var fadeStyle = {\n    transition: 'opacity 200ms',\n    opacity: 0\n  };\n  var fadeTransition = {\n    entering: { opacity: 0 },\n    entered: { opacity: 1 },\n    exiting: { opacity: 0, transitionDuration: exit + 'ms' }\n  };\n\n  return React.createElement(\n    Transition,\n    {\n      appear: true,\n      mountOnEnter: true,\n      unmountOnExit: true,\n      onEntered: onEntered,\n      onExited: onExited,\n      key: 'fade',\n      'in': inProp,\n      timeout: { enter: enter, exit: exit }\n    },\n    function (status) {\n      var innerProps = _extends({}, originalProps, {\n        style: _extends({}, fadeStyle, fadeTransition[status])\n      });\n\n      if (status === 'exited') return null;\n\n      return React.createElement(Tag, _extends({ innerProps: innerProps }, props));\n    }\n  );\n};\nvar SlideUp = function SlideUp(_ref2) {\n  var Tag = _ref2.component,\n      onEntered = _ref2.onEntered,\n      onExited = _ref2.onExited,\n      inProp = _ref2.in,\n      originalProps = _ref2.innerProps,\n      props = objectWithoutProperties(_ref2, ['component', 'onEntered', 'onExited', 'in', 'innerProps']);\n\n  var enter = 300;\n  var exit = 500;\n  var restingTransform = 'translate3d(0, 0, 0)';\n  var slideStyle = {\n    transition: 'transform ' + enter + 'ms ' + easing + ', opacity ' + enter + 'ms ' + easing,\n    transform: restingTransform\n  };\n  var slideTransition = {\n    entering: {\n      opacity: 0,\n      transform: 'translate3d(0, ' + verticalOffset + 'px, 0) scale(0.9)'\n    },\n    entered: {\n      opacity: 1,\n      transform: restingTransform\n    },\n    exiting: {\n      opacity: 0,\n      transform: 'translate3d(0, ' + verticalOffset + 'px, 0) scale(0.9)',\n      transition: 'transform ' + exit + 'ms ' + easing + ', opacity ' + exit + 'ms ' + easing\n    }\n  };\n\n  return React.createElement(\n    Transition,\n    {\n      appear: true,\n      'in': inProp,\n      mountOnEnter: true,\n      onEntered: onEntered,\n      onExited: onExited,\n      timeout: { enter: enter, exit: exit },\n      unmountOnExit: true\n    },\n    function (status) {\n      if (status === 'exited') return null;\n\n      var innerProps = _extends({}, originalProps, {\n        style: _extends({}, slideStyle, slideTransition[status])\n      });\n\n      return React.createElement(Tag, _extends({ innerProps: innerProps }, props));\n    }\n  );\n};\n\nvar defaultProps = {\n  allowFullscreen: !isTouch(),\n  closeOnBackdropClick: true,\n  closeOnEsc: true,\n  preventScroll: true,\n  styles: {}\n};\n\n/** Classes that when clicked on, close the backdrop */\nvar backdropClassNames = new Set([componentBaseClassNames.View, componentBaseClassNames.Header, componentBaseClassNames.Footer, componentBaseClassNames.Track, componentBaseClassNames.Positioner].map(className));\n\nvar Modal = function (_Component) {\n  inherits(Modal, _Component);\n\n  // TODO\n  function Modal(props) {\n    classCallCheck(this, Modal);\n\n    var _this = possibleConstructorReturn(this, (Modal.__proto__ || Object.getPrototypeOf(Modal)).call(this, props));\n\n    _initialiseProps.call(_this);\n\n    _this.cacheComponents(props.components);\n\n    _this.state = { isFullscreen: false, isClosing: false };\n    return _this;\n  }\n\n  createClass(Modal, [{\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.components !== this.props.components) {\n        this.cacheComponents(prevProps.components);\n      }\n    }\n\n    // emulate `componentDidMount` & `componentWillUnmount`\n    // called on complete of enter & exit transitions respectively\n\n  }, {\n    key: 'getCommonProps',\n    value: function getCommonProps() {\n      var isFullscreen = this.state.isFullscreen;\n\n\n      return {\n        getStyles: this.getStyles,\n        isFullscreen: isFullscreen,\n        modalProps: this.props\n      };\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _components = this.components,\n          Blanket = _components.Blanket,\n          Positioner = _components.Positioner,\n          Dialog = _components.Dialog;\n      var _props = this.props,\n          allowFullscreen = _props.allowFullscreen,\n          children = _props.children;\n      var isFullscreen = this.state.isFullscreen;\n\n      var commonProps = this.commonProps = this.getCommonProps();\n\n      // $FlowFixMe\n      var transitionIn = this.props.in;\n\n      // forward props to modal for use in internal components\n      var modalProps = {\n        allowFullscreen: allowFullscreen,\n        isFullscreen: isFullscreen,\n        onClose: this.handleClose,\n        preventScroll: this.preventScroll,\n        toggleFullscreen: this.toggleFullscreen\n      };\n\n      // augment user carousel with modal props\n      // $FlowFixMe\n      var carouselComponent = cloneElement(children, {\n        isModal: true,\n        modalProps: modalProps\n      });\n\n      return glam(\n        Fullscreen,\n        { enabled: isFullscreen, onChange: this.handleFullscreenChange },\n        glam(Fade, _extends({}, commonProps, { component: Blanket, 'in': transitionIn })),\n        glam(\n          SlideUp,\n          _extends({}, commonProps, {\n            component: Positioner,\n            'in': transitionIn,\n            innerProps: {\n              onClick: this.state.isClosing ? null : this.handleBackdropClick\n            },\n            onEntered: this.modalDidMount,\n            onExited: this.modalWillUnmount\n          }),\n          glam(\n            Dialog,\n            _extends({ removeFocusOn: this.state.isClosing }, commonProps),\n            carouselComponent\n          )\n        )\n      );\n    }\n  }]);\n  return Modal;\n}(Component);\n\nModal.defaultProps = defaultProps;\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this2 = this;\n\n  this.modalDidMount = function () {\n    document.addEventListener('keyup', _this2.handleKeyUp);\n    focusStore.storeFocus();\n  };\n\n  this.modalWillUnmount = function () {\n    document.removeEventListener('keyup', _this2.handleKeyUp);\n    focusStore.restoreFocus();\n    _this2.setState({ isClosing: false });\n  };\n\n  this.cacheComponents = function (comps) {\n    _this2.components = defaultModalComponents(comps);\n  };\n\n  this.handleFullscreenChange = function (isFullscreen) {\n    _this2.setState({ isFullscreen: isFullscreen });\n  };\n\n  this.handleKeyUp = function (event) {\n    var _props2 = _this2.props,\n        allowFullscreen = _props2.allowFullscreen,\n        closeOnEsc = _props2.closeOnEsc;\n    var isFullscreen = _this2.state.isFullscreen;\n\n    var allowClose = event.key === 'Escape' && closeOnEsc && !isFullscreen;\n\n    // toggle fullscreen\n    if (allowFullscreen && event.key === 'f') {\n      _this2.toggleFullscreen();\n    }\n\n    // close on escape when not fullscreen\n    if (allowClose) _this2.handleClose(event);\n  };\n\n  this.handleBackdropClick = function (event) {\n    var hasBackdropClassName = false;\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = event.target.classList[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var targetClass = _step.value;\n\n        if (backdropClassNames.has(targetClass)) {\n          hasBackdropClassName = true;\n        }\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    if (!hasBackdropClassName || !_this2.props.closeOnBackdropClick) {\n      return;\n    }\n\n    _this2.handleClose(event);\n  };\n\n  this.toggleFullscreen = function () {\n    _this2.setState(function (state) {\n      return { isFullscreen: !state.isFullscreen };\n    });\n  };\n\n  this.handleClose = function (event) {\n    var onClose = _this2.props.onClose;\n    var isFullscreen = _this2.state.isFullscreen;\n\n\n    _this2.setState({ isClosing: true });\n\n    // force exit fullscreen mode on close\n    if (isFullscreen) {\n      _this2.toggleFullscreen();\n    }\n\n    // call the consumer's onClose func\n    onClose(event);\n  };\n\n  this.getStyles = function (key, props) {\n    var base = defaultModalStyles[key](props);\n    base.boxSizing = 'border-box';\n    var custom = _this2.props.styles[key];\n    return custom ? custom(base, props) : base;\n  };\n};\n\n// ==============================\n// Navigation\n// ==============================\n\n/* ARIA label for the next button */\n\n\n// NOTE: props aren't used by default for some getters but consumers may need\n// them, this needs to be reflected in the flow type.\n\n/* eslint-disable no-unused-vars */\n\nfunction getNextLabel(_ref) {\n  var currentIndex = _ref.currentIndex,\n      views = _ref.views;\n\n  return 'Show slide ' + (currentIndex + 2) + ' of ' + views.length;\n}\n\n/* ARIA label for the previous button */\nfunction getPrevLabel(_ref2) {\n  var currentIndex = _ref2.currentIndex,\n      views = _ref2.views;\n\n  return 'Show slide ' + currentIndex + ' of ' + views.length;\n}\n\n/* HTML title for the next button */\nfunction getNextTitle(props) {\n  return 'Next (right arrow)';\n}\n\n/* HTML title for the previous button */\nfunction getPrevTitle(props) {\n  return 'Previous (left arrow)';\n}\n\n// ==============================\n// Header\n// ==============================\n\n/* ARIA label for the close button */\nfunction getCloseLabel(props) {\n  return 'Close (esc)';\n}\n/* ARIA label for the fullscreen button */\nfunction getFullscreenLabel(_ref3) {\n  var isFullscreen = _ref3.isFullscreen;\n\n  return isFullscreen ? 'Exit fullscreen (f)' : 'Enter fullscreen (f)';\n}\n\n// ==============================\n// View\n// ==============================\n\n/* alt text for each image in the carousel */\nfunction getAltText(_ref4) {\n  var data = _ref4.data,\n      index = _ref4.index;\n\n  if (data.caption) return data.caption;\n\n  return 'Image ' + (index + 1);\n}\n\n// ==============================\n// Exports\n// ==============================\n\nvar formatters = {\n  getAltText: getAltText,\n  getNextLabel: getNextLabel,\n  getPrevLabel: getPrevLabel,\n  getNextTitle: getNextTitle,\n  getPrevTitle: getPrevTitle,\n  getCloseLabel: getCloseLabel,\n  getFullscreenLabel: getFullscreenLabel\n};\n\nvar viewPagerStyles = {\n  flex: '1 1 auto',\n  position: 'relative'\n};\nvar frameStyles = { outline: 0 };\n\nvar defaultProps$1 = {\n  currentIndex: 0,\n  formatters: formatters,\n  hideControlsWhenIdle: 3000,\n  showNavigationOnTouchDevice: false,\n  styles: {},\n  trackProps: {\n    instant: !isTouch(),\n    swipe: 'touch'\n  }\n};\n\nvar trackBaseClassName = componentBaseClassNames.Track;\n\nvar Carousel = function (_Component) {\n  inherits(Carousel, _Component);\n\n  function Carousel(props) {\n    classCallCheck(this, Carousel);\n\n    var _this = possibleConstructorReturn(this, (Carousel.__proto__ || Object.getPrototypeOf(Carousel)).call(this, props));\n\n    _initialiseProps$1.call(_this);\n\n    _this.cacheComponents(props.components);\n\n    _this.state = {\n      currentIndex: props.currentIndex,\n      interactionIsIdle: isTouch()\n    };\n    return _this;\n  } // TODO\n\n\n  createClass(Carousel, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var _props = this.props,\n          hideControlsWhenIdle = _props.hideControlsWhenIdle,\n          modalProps = _props.modalProps;\n\n      var isModal = Boolean(modalProps);\n\n      this.mounted = true;\n\n      if (hideControlsWhenIdle && this.container) {\n        this.container.addEventListener('mousedown', this.handleMouseActivity);\n        this.container.addEventListener('mousemove', this.handleMouseActivity);\n        this.container.addEventListener('touchmove', this.handleMouseActivity);\n      }\n      if (isModal) {\n        this.focusViewFrame();\n      }\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.components !== this.props.components) {\n        this.cacheComponents(prevProps.components);\n      }\n\n      if (this.props.currentIndex !== prevProps.currentIndex) {\n        this.setState({ currentIndex: this.props.currentIndex });\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.mounted = false;\n\n      if (this.props.hideControlsWhenIdle && this.container) {\n        this.container.removeEventListener('mousedown', this.handleMouseActivity);\n        this.container.removeEventListener('mousemove', this.handleMouseActivity);\n        this.container.removeEventListener('touchmove', this.handleMouseActivity);\n        this.handleMouseActivity.cancel();\n      }\n    }\n\n    // ==============================\n    // Refs\n    // ==============================\n\n    // ==============================\n    // Utilities\n    // ==============================\n\n    // combine defaultProps with consumer props to maintain expected behaviour\n\n    // combine defaultProps with consumer props to maintain expected behaviour\n\n\n    // ==============================\n    // Handlers\n    // ==============================\n\n    // ==============================\n    // Renderers\n    // ==============================\n\n  }, {\n    key: 'getCommonProps',\n    value: function getCommonProps() {\n      var _props2 = this.props,\n          frameProps = _props2.frameProps,\n          trackProps = _props2.trackProps,\n          modalProps = _props2.modalProps,\n          views = _props2.views,\n          showNavigationOnTouchDevice = _props2.showNavigationOnTouchDevice;\n\n      var isModal = Boolean(modalProps);\n      var isFullscreen = Boolean(modalProps && modalProps.isFullscreen);\n      var _state = this.state,\n          currentIndex = _state.currentIndex,\n          interactionIsIdle = _state.interactionIsIdle;\n\n      var currentView = this.getViewData();\n\n      return {\n        carouselProps: this.props,\n        currentIndex: currentIndex,\n        currentView: currentView,\n        formatters: this.props.formatters,\n        frameProps: frameProps,\n        getStyles: this.getStyles,\n        showNavigationOnTouchDevice: showNavigationOnTouchDevice,\n        isFullscreen: isFullscreen,\n        isModal: isModal,\n        modalProps: modalProps,\n        interactionIsIdle: interactionIsIdle,\n        trackProps: trackProps,\n        views: views\n      };\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _components = this.components,\n          Container = _components.Container,\n          View = _components.View;\n      var currentIndex = this.state.currentIndex;\n      var _props3 = this.props,\n          frameProps = _props3.frameProps,\n          views = _props3.views;\n\n      var commonProps = this.commonProps = this.getCommonProps();\n\n      return glam(\n        Container,\n        _extends({}, commonProps, { innerProps: { innerRef: this.getContainer } }),\n        this.renderHeader(),\n        glam(\n          ViewPager,\n          {\n            tag: 'main',\n            style: viewPagerStyles,\n            className: className('pager')\n          },\n          glam(\n            Frame,\n            _extends({}, frameProps, {\n              ref: this.getFrame,\n              className: className('frame'),\n              style: frameStyles,\n              tabIndex: '-1'\n            }),\n            glam(\n              Track,\n              _extends({}, this.getTrackProps(this.props), {\n                style: { display: 'flex', alignItems: 'center' },\n                currentView: currentIndex,\n                className: className(trackBaseClassName),\n                onViewChange: this.handleViewChange,\n                ref: this.getTrack\n              }),\n              views && views.map(function (data, index) {\n                return glam(\n                  View$1,\n                  { className: className('view-wrapper'), key: index },\n                  glam(View, _extends({}, commonProps, { data: data, index: index }))\n                );\n              })\n            )\n          ),\n          this.renderNavigation()\n        ),\n        this.renderFooter()\n      );\n    }\n  }]);\n  return Carousel;\n}(Component);\n\nCarousel.defaultProps = defaultProps$1;\n\nvar _initialiseProps$1 = function _initialiseProps() {\n  var _this2 = this;\n\n  this.mounted = false;\n\n  this.cacheComponents = function (comps) {\n    _this2.components = defaultCarouselComponents(comps);\n  };\n\n  this.getContainer = function (ref) {\n    _this2.container = ref;\n  };\n\n  this.getFooter = function (ref) {\n    _this2.footer = ref;\n  };\n\n  this.getFrame = function (ref) {\n    _this2.frame = findDOMNode(ref);\n  };\n\n  this.getHeader = function (ref) {\n    _this2.header = ref;\n  };\n\n  this.getTrack = function (ref) {\n    _this2.track = ref;\n  };\n\n  this.hasPreviousView = function () {\n    var trackProps = _this2.props.trackProps;\n    var currentIndex = _this2.state.currentIndex;\n\n\n    return trackProps.infinite || currentIndex !== 0;\n  };\n\n  this.hasNextView = function () {\n    var _props4 = _this2.props,\n        trackProps = _props4.trackProps,\n        views = _props4.views;\n    var currentIndex = _this2.state.currentIndex;\n\n\n    return trackProps.infinite || currentIndex !== views.length - 1;\n  };\n\n  this.getStyles = function (key, props) {\n    var base = defaultCarouselStyles[key](props);\n    base.boxSizing = 'border-box';\n    var custom = _this2.props.styles[key];\n    return custom ? custom(base, props) : base;\n  };\n\n  this.getTrackProps = function (props) {\n    return _extends({}, defaultProps$1.trackProps, props.trackProps);\n  };\n\n  this.getFormatters = function () {\n    return _extends({}, defaultProps$1.formatters, _this2.props.formatters);\n  };\n\n  this.getViewData = function () {\n    var views = _this2.props.views;\n    var currentIndex = _this2.state.currentIndex;\n\n\n    return views[currentIndex];\n  };\n\n  this.focusViewFrame = function () {\n    if (_this2.frame && document.activeElement !== _this2.frame) {\n      _this2.frame.focus();\n    }\n  };\n\n  this.prev = function (event) {\n    event.stopPropagation();\n    _this2.track.prev();\n    _this2.focusViewFrame();\n  };\n\n  this.next = function (event) {\n    event.stopPropagation();\n    _this2.track.next();\n    _this2.focusViewFrame();\n  };\n\n  this.handleMouseActivity = rafScheduler(function () {\n    clearTimeout(_this2.timer);\n\n    if (_this2.state.interactionIsIdle) {\n      _this2.setState({ interactionIsIdle: false });\n    }\n\n    _this2.timer = setTimeout(function () {\n      if (_this2.mounted) {\n        _this2.setState({ interactionIsIdle: true });\n      }\n    }, _this2.props.hideControlsWhenIdle);\n  });\n\n  this.handleViewChange = function (indicies) {\n    var trackProps = _this2.props.trackProps;\n\n    // simplify by enforcing number\n\n    var currentIndex = indicies[0];\n\n    _this2.setState({ currentIndex: currentIndex });\n\n    // call the consumer's onViewChange fn\n    if (trackProps && trackProps.onViewChange) {\n      trackProps.onViewChange(currentIndex);\n    }\n  };\n\n  this.renderNavigation = function () {\n    var _getFormatters = _this2.getFormatters(),\n        getNextLabel = _getFormatters.getNextLabel,\n        getPrevLabel = _getFormatters.getPrevLabel,\n        getNextTitle = _getFormatters.getNextTitle,\n        getPrevTitle = _getFormatters.getPrevTitle;\n\n    var _components2 = _this2.components,\n        Navigation = _components2.Navigation,\n        NavigationPrev = _components2.NavigationPrev,\n        NavigationNext = _components2.NavigationNext;\n    var commonProps = _this2.commonProps;\n\n\n    var showPrev = _this2.hasPreviousView();\n    var showNext = _this2.hasNextView();\n    var showNav = (showPrev || showNext) && Navigation;\n\n    return showNav ? glam(\n      Navigation,\n      commonProps,\n      showPrev && glam(NavigationPrev, _extends({}, commonProps, {\n        align: 'left',\n        innerProps: {\n          'aria-label': getPrevLabel(commonProps),\n          onClick: _this2.prev,\n          title: getPrevTitle(commonProps)\n        }\n      })),\n      showNext && glam(NavigationNext, _extends({}, commonProps, {\n        align: 'right',\n        innerProps: {\n          'aria-label': getNextLabel(commonProps),\n          onClick: _this2.next,\n          title: getNextTitle(commonProps)\n        }\n      }))\n    ) : null;\n  };\n\n  this.renderFooter = function () {\n    var _components3 = _this2.components,\n        Footer = _components3.Footer,\n        FooterCaption = _components3.FooterCaption,\n        FooterCount = _components3.FooterCount;\n    var commonProps = _this2.commonProps;\n\n\n    return Footer ? glam(Footer, _extends({}, commonProps, {\n      components: {\n        Caption: FooterCaption,\n        Count: FooterCount\n      },\n      innerProps: { innerRef: _this2.getFooter }\n    })) : null;\n  };\n\n  this.renderHeader = function () {\n    var _components4 = _this2.components,\n        Header = _components4.Header,\n        HeaderClose = _components4.HeaderClose,\n        HeaderFullscreen = _components4.HeaderFullscreen;\n\n    var _getFormatters2 = _this2.getFormatters(),\n        getCloseLabel = _getFormatters2.getCloseLabel,\n        getFullscreenLabel = _getFormatters2.getFullscreenLabel;\n\n    var commonProps = _this2.commonProps;\n\n\n    return Header ? glam(Header, _extends({}, commonProps, {\n      getCloseLabel: getCloseLabel,\n      getFullscreenLabel: getFullscreenLabel,\n      components: {\n        CloseButton: HeaderClose,\n        FullscreenButton: HeaderFullscreen\n      },\n      data: _this2.getViewData(),\n      innerProps: { innerRef: _this2.getHeader }\n    })) : null;\n  };\n};\n\nvar FirstChild = function FirstChild(_ref) {\n  var children = _ref.children;\n  return Children.toArray(children)[0] || null;\n};\n\nvar ModalGateway = function (_Component) {\n  inherits(ModalGateway, _Component);\n\n  function ModalGateway() {\n    classCallCheck(this, ModalGateway);\n    return possibleConstructorReturn(this, (ModalGateway.__proto__ || Object.getPrototypeOf(ModalGateway)).apply(this, arguments));\n  }\n\n  createClass(ModalGateway, [{\n    key: 'render',\n    value: function render() {\n      if (typeof window === 'undefined') return null;\n      var _props = this.props,\n          target = _props.target,\n          children = _props.children;\n\n      return createPortal(React.createElement(TransitionGroup, { component: FirstChild, children: children }), target);\n    }\n  }]);\n  return ModalGateway;\n}(Component);\n\nModalGateway.defaultProps = {\n  target: typeof window !== 'undefined' ? document.body : null\n};\n\nexport default Carousel;\nexport { Modal, ModalGateway, carouselComponents, modalComponents };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}